{"_path":"/webhooks/manual-polling","_dir":"webhooks","_draft":false,"_partial":false,"_locale":"","title":"Manual updates polling","description":"As an aternative to set up a webhook, a bot updates can be fetched by periodically polling Telegram APIs","navigation":{"title":"Manual Polling"},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"As an aternative to set up a webhook, a bot updates can be fetched by periodically polling Telegram APIs"}]},{"type":"element","tag":"alert","props":{"type":"alert"},"children":[{"type":"text","value":"\nManual updates polling is not available if a webhook is set up for the bot. Webhook should be remove first using its \n"},{"type":"element","tag":"a","props":{"href":"/webhooks/deleting-webhooks"},"children":[{"type":"text","value":"unregisterWebhook"}]},{"type":"text","value":"\n method\n"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"in order to get the updates, an "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"->updates()"}]},{"type":"text","value":" method is available in the "},{"type":"element","tag":"a","props":{"href":"/models/telegraph-bot"},"children":[{"type":"text","value":"TelegraphBot"}]},{"type":"text","value":" model:"}]},{"type":"element","tag":"pre","props":{"className":"language-php shiki shiki-themes github-dark github-light","code":"$updates = $telegraphBot->updates();\n","language":"php","meta":"","style":""},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line","line":1},"children":[{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"$updates "}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":" $telegraphBot"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#F97583;--shiki-default:#D73A49"},"children":[{"type":"text","value":"->"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#B392F0;--shiki-default:#6F42C1"},"children":[{"type":"text","value":"updates"}]},{"type":"element","tag":"span","props":{"style":"--shiki-dark:#E1E4E8;--shiki-default:#24292E"},"children":[{"type":"text","value":"();\n"}]}]}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"the call will result in a collection of "},{"type":"element","tag":"a","props":{"href":"/webhooks/dto#telegram-update"},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"DefStudio\\Telegraph\\DTO\\TelegramUpdate"}]}]},{"type":"text","value":" instances, one for each update, sorted by the oldest one."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"It is advised to keep track of the  "},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"TelegramUpdate::id()"}]},{"type":"text","value":" in order to avoid processing the same update multiple times."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"The content of each update depends on the update type ("},{"type":"element","tag":"a","props":{"href":"/webhooks/webhook-request-types#chat-messages"},"children":[{"type":"text","value":"Chat Message"}]},{"type":"text","value":" or "},{"type":"element","tag":"a","props":{"href":"/webhooks/webhook-request-types#callback-queries"},"children":[{"type":"text","value":"Callback Query"}]},{"type":"text","value":") and on the specific message type. Refer to the "},{"type":"element","tag":"a","props":{"href":"/webhooks/dto"},"children":[{"type":"text","value":"DTO"}]},{"type":"text","value":" section for more details."}]},{"type":"element","tag":"style","props":{},"children":[{"type":"text","value":"html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}"}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[]}},"_type":"markdown","_id":"content:14.webhooks:8.manual-polling.md","_source":"content","_file":"14.webhooks/8.manual-polling.md","_extension":"md"}